pipeline {
    agent any

    parameters {
        
        string(name: 'NAME', description: 'Please tell me your name')
        string(name: 'SURNAME', description: 'Please tell me your surname')
        string(name: 'AGE', description: 'Please tell me your age')
        choice(name: 'MONTH', choices: ['July', 'August', 'September'], description: 'Choose the month to make your wishes come true')

    }

    stages {
        stage('Setup') {
            steps {
                echo "Hello ${params.NAME} ${params.SURNAME} !"
                echo "Your are ${params.AGE} and it's time to make your wishes comme true !"
                echo "Pipeline started for the month: ${params.MONTH}"
            }
        }

        stage ('Check Date') {
            steps {
                check_deadline()
            }
            
        }

        stage('July Objectives Overview') {
            when {
                expression { params.MONTH == 'July' }
            }
            steps {
                echo 'Here are your objectives for the month of July'
                echo 'Go to a concert and dance'
            }
        }

        stage('Create and Save a List of Upcoming Concerts') {
            when {
                expression { params.MONTH == 'July' }
            }
            steps {
                process('   - Creating a list of upcoming concerts', '      Concert list created')
            }
        }

        stage('Organize Saved Concerts') {
            when {
                expression { params.MONTH == 'July' }
            }
            steps {
                process('   - Organizing saved concerts','      Concerts organized' )
            }
        }
        
        stage('Share Concerts with Friends') {
            when {
                expression { params.MONTH == 'July' }
            }
            steps {
                process('   - Sharing saved concerts with friends', '     Concerts shared')
            }
        }

        stage('August Objectives Overview') {
            when {
                expression { params.MONTH == 'August' }
            }
            steps {
                echo 'Here are your objectives for the month of August'
                echo 'Sleep a night on the beach'
            }
        }

        stage('Create and Save a List of Beaches') {
            when {
                expression { params.MONTH == 'August' }
            }
            steps {
                process('   - Creating a list of  beaches',  '        List Created')
            }
        }

        stage('Plan Mandatory Equipment') {
            when {
                expression { params.MONTH == 'August' }
            }
            steps {
                process('   - Planning mandatory equipment for the beach', '      List of mandatory equipment created')
            }
        }

        stage('Check beach information') {
            when {
                expression { params.MONTH == 'August' }
            }
            steps {
                process('   - Gathering information about beaches (Location, Weather, Sand/Rocks, Tide)', '       Beach information checked and saved')
            }
        }

        stage('September Objectives Overview') {
            when {
                expression { params.MONTH == 'September' }
            }
            steps {
                echo 'Here are your objectives for the month of September'
                echo 'Discover the World'
            }
        }

        stage('Create and Save a List of Destinations') {
            when {
                expression { params.MONTH == 'September' }
            }
            steps {
                process('   - Creating a list of destinations for exploration', '     List of destinations created and saved')
            }
        }

        stage('Create a List of Activities for Each Destination') {
            when {
                expression { params.MONTH == 'September' }
            }
            steps {
                process('   -  Creating a list of activities for each destination', '      Activities for destinations planned and saved')
            }
        }

        stage('View Key Details About Each Destination') {
            when {
                expression { params.MONTH == 'September' }
            }
            steps {
                process('   - Gathering key details about destinations (local culture, weather, landmarks)', '        Destination details reviewed and saved')
            }
        }


    }
}

def process(String message1, String message2) {
    echo message1
    sleep 2
    echo message2
}

def check_deadline() {
    def currentDate = new Date()
    def currentDay = currentDate.format('d').toInteger()
    if (currentDay > 15) {
        echo "Reminder: Today is ${currentDay}. Time is running out to achieve your objectives for this month"
    } else {
        echo "Today is ${currentDay}. The end of the month is near - make sur to complete your objectives !"
    }
}
